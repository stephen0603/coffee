{"version":3,"file":"js/123.5db226bc.js","mappings":"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","sources":["webpack://new-project/./src/views/UserCart.vue","webpack://new-project/./src/views/UserCart.vue?698a"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"container\">\n    <div class=\"row mt-5 justify-content-center\">\n      <!-- 步驟欄 -->\n      <div class=\"col-lg-8 step-navigation\">\n  <div class=\"email text-success\">\n    <i class=\"bi bi-envelope-fill fs-3\" aria-hidden=\"true\"></i>  \n    <h5>確認商品</h5>\n  </div>\n  <div class=\"name text-secondary\">\n    <i class=\"bi bi-person-fill fs-3\" aria-hidden=\"true\"></i>\n    <h5>填寫資料</h5>\n  </div>\n  <div class=\"password text-secondary\">\n    <i class=\"bi bi-unlock-fill fs-3\" aria-hidden=\"true\"></i>\n    <h5>付款</h5>\n  </div>\n</div>\n      <!-- 購物車列表 -->\n      <div class=\"mt-5\">\n        <div class=\"sticky-top\">\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 110px\">數量</th>\n                <th>單價</th>\n              </tr>\n            </thead>\n            <tbody>\n            <template v-if=\"cart.carts\">\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                <td>\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm\"\n                          :disabled=\"status.loadingItem === item.id\"\n                          @click=\"removeCartItem(item.id)\">\n                    <i class=\"bi bi-x\"></i>\n                  </button>\n                </td>\n                <td>\n                  {{ item.product.title }}\n                  <div class=\"text-success\" v-if=\"item.coupon\">\n                    已套用優惠券\n                  </div>\n                </td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    <input type=\"number\" class=\"form-control\"\n                          min=\"1\"\n                          :disabled=\"item.id === status.loadingItem\"\n                          @change=\"updateCart(item)\"\n                          v-model.number=\"item.qty\">\n                    <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n                  </div>\n                </td>\n                <td class=\"text-end\">\n                  <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\">折扣價：</small>\n                  {{ $filters.currency(item.final_total) }}\n                </td>\n              </tr>\n            </template>\n            </tbody>\n            <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\n            </tr>\n            <tr v-if=\"cart.final_total !== cart.total\">\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n              <td class=\"text-end text-success\">{{ $filters.currency(cart.total) }}</td>\n            </tr>\n            </tfoot>\n          </table>\n          \n          <div class=\"input-group mb-3 input-group-sm\">\n            <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">\n                套用優惠碼\n              </button>\n            </div>\n            <button type=\"button\" class=\"form-control btn btn-outline-danger ms-3 rounded\"  :class=\"{'disabled': cart.total === 0 }\" @click.prevent=\"goForm\">確認商品</button> \n          </div>\n        <div>\n        </div>\n        </div>\n      </div>\n    </div>\n  \n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      products: [],\n      product: {},\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n      cart: {},\n      coupon_code: '',\n    };\n  },\n  methods: {\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        this.products = response.data.products;\n        console.log('products:', response);\n        this.isLoading = false;\n      });\n    },\n    getProduct(id) {\n      this.$router.push(`/user/product/${id}`);\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.$http.post(url, { data: cart })\n        .then((res) => {\n          this.status.loadingItem = '';\n          console.log(res);\n          this.getCart();\n        });\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        console.log(response);\n        this.cart = response.data.data;\n        this.isLoading = false;\n      });\n    },\n    updateCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.$http.put(url, { data: cart }).then((res) => {\n        console.log(res);\n        this.status.loadingItem = '';\n        this.getCart();\n      });\n    },\n    removeCartItem(id) {\n      this.status.loadingItem = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        this.$httpMessageState(response, '移除購物車品項');\n        this.status.loadingItem = '';\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon }).then((response) => {\n        this.$httpMessageState(response, '加入優惠券');\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    goForm(){\n      this.$router.push('/user/form')\n    }\n  },\n  created() {\n    this.getProducts();\n    this.getCart();\n  },\n};\n</script>\n\n<style>\n.step-navigation {\n  margin-top: 100px;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.step-navigation>div {\n  border: 1px solid;\n  border-radius: 90%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 150px;\n  height: 150px;\n}\n\n.step-navigation>div>i {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n</style>","import { render } from \"./UserCart.vue?vue&type=template&id=3ca27a0c\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport \"./UserCart.vue?vue&type=style&index=0&id=3ca27a0c&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\User\\\\Desktop\\\\coffee\\\\coffee\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_9","colspan","_createVNode","_component_Loading","active","_ctx","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","$data","carts","_createElementBlock","_Fragment","key","item","id","type","disabled","loadingItem","onClick","$options","product","title","coupon","_hoisted_11","_hoisted_12","min","onChange","qty","_hoisted_14","unit","_hoisted_15","final_total","total","_hoisted_16","currency","_hoisted_17","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_22","placeholder","_hoisted_23","_hoisted_24","data","products","status","cart","coupon_code","methods","getProducts","url","this","isLoading","$http","get","then","response","console","log","getProduct","$router","push","addCart","product_id","post","res","getCart","updateCart","put","removeCartItem","delete","$httpMessageState","addCouponCode","code","goForm","created","__exports__","render"],"sourceRoot":""}